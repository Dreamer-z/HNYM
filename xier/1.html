<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="./js/jquery-1.8.3.min.js"></script>
    <title>Document</title>
</head>
<style>
    * {
        margin: 0;
        padding: 0;
        font-family: "微软雅黑", Msyh;
    }
    
    a {
        text-decoration: none;
        outline: none;
    }
    
    a:hover {
        cursor: pointer;
    }
    
    img {
        border: none;
        display: block;
    }
    
    li {
        list-style: none;
    }
    
    .y-width {
        width: 1200px;
        max-width: 1200px;
        margin: 0 auto;
    }
    
    .y-clearfix::before,
    .y-clearfix::after {
        content: "";
        height: 0;
        line-height: 0;
        display: block;
        visibility: hidden;
        clear: both;
    }
    
    .y-left {
        float: left;
    }
    
    .y-right {
        float: right;
    }
    
    .y-ws {
        width: 100%;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
    }
    
    #banner {
        width: 100%;
        height: 524px;
        overflow: hidden;
        position: relative;
        z-index: 900;
    }
    
    #banner-content {
        height: 100%;
    }
    
    #banner-content .banner-li {
        height: 100%;
    }
    
    #banner-content .banner-li a {
        display: block;
    }
    
    #banner-content .banner-li a .banner-img {
        display: block;
        height: 524px;
        width: 100%;
    }
    
    #banner-swicth-ul {
        position: absolute;
        left: 50%;
        bottom: 40px;
        z-index: 990;
    }
    
    #banner-swicth-ul .banner-swicth-li {
        margin: 0 5px;
    }
    
    #banner-swicth-ul .banner-swicth-li .banner-list-checked {
        width: 50px;
        border-radius: 10px;
        background-color: #393a38;
    }
    
    #banner-swicth-ul .banner-swicth-li i {
        display: block;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        border: 1px solid #075279;
        background-color: #fff;
    }
    
    .switchClick {
        width: 80px;
        height: 80px;
        position: absolute;
        top: 50%;
        z-index: 990;
        margin-top: -40px;
        border-radius: 50%;
        display: none;
    }
    
    #banner:hover .switchClick {
        display: block;
    }
    
    #banner-swicth-left {
        left: 120px;
        background: url(./../images/left.png) no-repeat center;
        background-size: 100%;
        background-color: rgba(0, 0, 0, 0.5);
    }
    
    #banner-swicth-right {
        right: 120px;
        background: url(./../images/right.png) no-repeat center;
        background-size: 100%;
        background-color: rgba(0, 0, 0, 0.5);
    }
</style>

<body>
    <div id="banner">
        <ul id="banner-content" class="y-clearfix" style="width: 700%; margin-left: -2623.49px;">
            <li class="banner-li y-left" style="width: 14.2857%;">
                <a><img class="banner-img" src="http://admin.tangph.com//upload/cms/image/20171204/20171204153729_3229.jpg" alt=""></a>
            </li>
            <li class="banner-li y-left" style="width: 14.2857%;">
                <a><img class="banner-img" src="http://admin.tangph.com//upload/cms/image/20171204/20171204153654_2205.jpg" alt=""></a>
            </li>
            <li class="banner-li y-left" style="width: 14.2857%;">
                <a><img class="banner-img" src="http://admin.tangph.com//upload/cms/image/20171030/20171030102357_6191.jpg" alt=""></a>
            </li>
            <li class="banner-li y-left" style="width: 14.2857%;">
                <a><img class="banner-img" src="http://admin.tangph.com//upload/cms/image/20171204/20171204153749_1721.jpg" alt=""></a>
            </li>
            <li class="banner-li y-left" style="width: 14.2857%;">
                <a><img class="banner-img" src="http://admin.tangph.com//upload/cms/image/20171204/20171204153708_1996.jpg" alt=""></a>
            </li>
            <li class="banner-li y-left" style="width: 14.2857%;">
                <a><img class="banner-img" src="http://admin.tangph.com//upload/cms/image/20171030/20171030102417_0965.jpg" alt=""></a>
            </li>
            <li class="banner-li y-left" style="width: 14.2857%;">
                <a><img class="banner-img" src="http://admin.tangph.com//upload/cms/image/20171204/20171204153729_3229.jpg" alt=""></a>
            </li>
        </ul>

        <ul id="banner-swicth-ul" class="y-clearfix" style="margin-left: -112px;">
            <li class="banner-swicth-li y-left"><i class=""></i></li>
            <li class="banner-swicth-li y-left"><i class=""></i></li>
            <li class="banner-swicth-li y-left"><i class=""></i></li>
            <li class="banner-swicth-li y-left"><i class="banner-list-checked"></i></li>
            <li class="banner-swicth-li y-left"><i class=""></i></li>
            <li class="banner-swicth-li y-left"><i class=""></i></li>
            <li class="banner-swicth-li y-left"><i></i></li>
        </ul>

        <span id="banner-swicth-left" class="switchClick"></span>
        <span id="banner-swicth-right" class="switchClick"></span>
    </div>
</body>
<script>
    //-----------------------------banner----------------------------------------
    function banner(linum) {
        this.num = 0;
        this.n = 0;
        this.run();
        this.numthis = 0;
        this.flag = false;
        this.linum = linum;
    };
    banner.prototype.run = function() {
        var mwidth;

        mwidth = $("#banner-content").width() / $(".banner-li").length;
        var linum = $("#banner-content>li").length;
        $(".banner-swicth-li>i").each(function(i) {
            $(".banner-swicth-li:eq(" + i + ")>i").removeClass("banner-list-checked");
        });
        $("#banner-content").css("margin-left", 0);
        $(".banner-swicth-li:eq(0)>i").addClass("banner-list-checked");
        var self = this;
        var timer = setInterval(move, 5000);

        function move() {
            if (self.num == (linum - 1)) {
                self.num = 0;
                $(".banner-swicth-li").each(function(i) {
                    $(".banner-swicth-li:eq(" + i + ")>i").removeClass("banner-list-checked");
                });
                $(".banner-swicth-li:eq(0)>i").addClass("banner-list-checked");
                $("#banner-content").css("margin-left", 0);
            };
            self.num++;
            self.n++;
            $("#banner-content").animate({
                "margin-left": -mwidth * self.num
            }, 2000);
            $(".banner-swicth-li").each(function(i) {
                $(".banner-swicth-li:eq(" + i + ")>i").removeClass("banner-list-checked");
            });
            $(".banner-swicth-li:eq(" + (self.num > (linum - 2) ? 0 : self.num) + ")>i").addClass("banner-list-checked");

        };
        $("#banner-swicth-left").click(function() {
            if ($("#banner-content").is(":animated")) {
                return;
            }
            self.num--;
            self.n--;
            $(".banner-swicth-li").each(function(i) {
                $(".banner-swicth-li:eq(" + i + ")>i").removeClass("banner-list-checked");
            });
            $(".banner-swicth-li:eq(" + (self.num < 0 ? (linum - 2) : self.num) + ")>i").addClass("banner-list-checked");
            if (self.num < 0) {
                self.num = (linum - 1);
                $("#banner-content").css({
                    "margin-left": self.num * -mwidth
                });
                setTimeout(function() {
                    self.num--;
                    self.n--;
                    $("#banner-content").stop(true, true);
                    $("#banner-content").animate({
                        "margin-left": self.num * -mwidth
                    }, 2000);
                }, 10);
            }
            $("#banner-content").animate({
                "margin-left": self.num * -mwidth
            }, 2000);
        });
        $("#banner-swicth-right").click(function() {
            if ($("#banner-content").is(":animated")) {
                return;
            };
            if (self.num == (linum - 1)) {
                self.num = 0;
                $(".banner-swicth-li").each(function(i) {
                    $(".banner-swicth-li:eq(" + i + ")>i").removeClass("banner-list-checked");
                });
                $(".banner-swicth-li:eq(0)>i").addClass("banner-list-checked");
                $("#banner-content").css("margin-left", 0);
            };
            self.num++;
            self.n++;
            $("#banner-content").animate({
                "margin-left": -mwidth * self.num
            }, 2000);
            $(".banner-swicth-li").each(function(i) {
                $(".banner-swicth-li:eq(" + i + ")>i").removeClass("banner-list-checked");
            });
            $(".banner-swicth-li:eq(" + (self.num > (linum - 2) ? 0 : self.num) + ")>i").addClass("banner-list-checked");
        });
        $(".banner-swicth-li").each(function(i) {
            $(".banner-swicth-li:eq(" + i + ")>i").click(function() {
                if ($("#banner-content").is(":animated")) {
                    return;
                };
                $("#banner-content").stop(true, true);
                self.num = i;
                self.n = i;
                $("#banner-content").animate({
                    "margin-left": -mwidth * self.num
                }, 2000);
                $(".banner-swicth-li").each(function(i) {
                    $(".banner-swicth-li:eq(" + i + ")>i").removeClass("banner-list-checked");
                });
                $(".banner-swicth-li:eq(" + self.n + ")>i").addClass("banner-list-checked");
            });

        });
        var lock = false;
        var ti = false;
        $("#banner").mouseenter(function() {
            if (lock == true || ti == true) {
                return;
            } else {
                lock = true;
                ti = true;
                clearInterval(timer);
            };
        });
        $("#banner").mouseleave(function() {
            setTimeout(function() {
                if (lock == false || ti == false) {
                    return;
                };
                ti = false;
                if (ti == false) {
                    setTimeout(function() {
                        lock = false;
                        timer = setInterval(move, 5000);
                    }, 10);
                };
            }, 1000);
        });
        document.addEventListener("blur", function() {
            $("#banner-content").finish();
            // if (lock == true || ti == true) {
            //     return;
            // };
            lock = true;
            ti = true;
            clearInterval(timer);
        });
        document.addEventListener("focus", function() {
            setTimeout(function() {
                if (lock == false || ti == false) {
                    return;
                };
                ti = false;
                if (ti == false) {
                    setTimeout(function() {
                        lock = false;
                        timer = setInterval(move, 5000);
                    }, 10);
                };
            }, 1000);
        });

        // $("#banner-swicth-ul").mouseenter(function() {
        //     if (lock == true) {
        //         return;
        //     };
        //     lock = true;
        //     clearInterval(timer);
        // });
        // $("#banner-swicth-ul").mouseleave(function() {
        //     if (lock == false) {
        //         return;
        //     };
        //     lock = false;
        //     setTimeout(function() {
        //         timer = setInterval(move, 5000);
        //     }, 1000);
        // });
        // $(".switchClick").mouseenter(function() {
        //     if (lock == true) {
        //         return;
        //     };
        //     lock = true;
        //     clearInterval(timer);
        // });
        // $(".switchClick").mouseleave(function() {
        //     if (lock == false) {
        //         return;
        //     };
        //     lock = false;
        //     setTimeout(function() {
        //         timer = setInterval(move, 5000);
        //     }, 1000);
        // });
        // window.addEventListener("blur", function() {
        //     clearInterval(timer);
        // });
        // window.addEventListener("focus", function() {
        //     setTimeout(function() {
        //         timer = setInterval(move, 3000);
        //     }, 200);
        // });
    };
    var bn = new banner();
</script>

</html>